---
originRequest:
  http2Origin: true
  noHappyEyeballs: false          # Improves connection reliability

ingress:
  # Envoy Gateway rules (commented out - uncomment as you migrate services)
  # media
  - hostname: "bazarr.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "bazarr.${SECRET_DOMAIN}"
  - hostname: "radarr.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "radarr.${SECRET_DOMAIN}"
  - hostname: "sonarr.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "sonarr.${SECRET_DOMAIN}"
  - hostname: "plex.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "plex.${SECRET_DOMAIN}"
  - hostname: "prowlarr.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "prowlarr.${SECRET_DOMAIN}"
  - hostname: "sabnzbd.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "sabnzbd.${SECRET_DOMAIN}"

  - hostname: "prometheus.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "prometheus.${SECRET_DOMAIN}"
  - hostname: "rook.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "rook.${SECRET_DOMAIN}"
  - hostname: "grafana.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "grafana.${SECRET_DOMAIN}"
  - hostname: "homepage.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "homepage.${SECRET_DOMAIN}"
  - hostname: "kite.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "kite.${SECRET_DOMAIN}"
  - hostname: "lldap.${SECRET_DOMAIN}"
    service: https://envoy-internal.network.svc.cluster.local:443
    originRequest:
      originServerName: "lldap.${SECRET_DOMAIN}"
  - hostname: "whoami.${SECRET_DOMAIN}"
    service: https://envoy-external.network.svc.cluster.local:443
    originRequest:
      originServerName: "whoami.${SECRET_DOMAIN}"
  - hostname: "www.${SECRET_DOMAIN}"
    service: https://envoy-external.network.svc.cluster.local:443
    originRequest:
      originServerName: "www.${SECRET_DOMAIN}"
  - hostname: "${SECRET_DOMAIN}"
    service: https://envoy-external.network.svc.cluster.local:443
    originRequest:
      originServerName: "${SECRET_DOMAIN}"

  # Ingress-NGINX rules (current production)
  - hostname: "${SECRET_DOMAIN}"
    service: https://ingress-nginx-external-controller.network.svc.cluster.local:443
    originRequest:
      originServerName: "external.${SECRET_DOMAIN}"
  - hostname: "*.${SECRET_DOMAIN}"
    service: https://ingress-nginx-external-controller.network.svc.cluster.local:443
    originRequest:
      originServerName: "external.${SECRET_DOMAIN}"
  - hostname: "${SECRET_DOMAIN_TWO}"
    service: https://ingress-nginx-external-controller.network.svc.cluster.local:443
    originRequest:
      originServerName: "external.${SECRET_DOMAIN_TWO}"
  - hostname: "*.${SECRET_DOMAIN_TWO}"
    service: https://ingress-nginx-external-controller.network.svc.cluster.local:443
    originRequest:
      originServerName: "external.${SECRET_DOMAIN_TWO}"

  # Catch-all rule - MUST be last
  - service: http_status:404
